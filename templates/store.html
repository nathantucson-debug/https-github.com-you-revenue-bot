<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Northstar Studio Store</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600;700&family=Fraunces:opsz,wght@9..144,500;9..144,700&display=swap');
    :root{--ink:#111827;--muted:#4b5563;--line:#e5e7eb;--bg:#f8fafc;--card:#fff;--brand:#1d4ed8;--brand2:#0f172a}
    *{box-sizing:border-box}
    body{margin:0;font-family:"Instrument Sans",system-ui,sans-serif;color:var(--ink);background:var(--bg)}
    .wrap{max-width:1160px;margin:0 auto;padding:0 1rem}
    header{position:sticky;top:0;background:#ffffffed;backdrop-filter:blur(8px);border-bottom:1px solid var(--line);z-index:20}
    .nav{display:flex;justify-content:space-between;align-items:center;padding:.85rem 0}
    .brand{display:flex;gap:.6rem;align-items:center;text-decoration:none;color:inherit}
    .brand img{width:34px;height:34px;border-radius:10px}
    .brand h2{margin:0;font:700 1.1rem "Fraunces",serif;letter-spacing:-.01em}
    .brand p{margin:0;color:#64748b;font-size:.78rem}
    .btn{display:inline-block;text-decoration:none;border:1px solid var(--line);background:#fff;color:var(--ink);padding:.55rem .85rem;border-radius:10px;font-weight:600}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}

    main{padding:1.2rem 0 1.9rem}
    .hero{background:#fff;border:1px solid var(--line);border-radius:18px;padding:1rem 1.05rem;margin-bottom:.9rem}
    h1{margin:0 0 .45rem;font:700 clamp(1.8rem,3.9vw,2.8rem) "Fraunces",serif;line-height:1.05}
    .sub{margin:0;color:var(--muted);line-height:1.55;max-width:68ch}
    .hero-row{margin-top:.75rem;display:flex;gap:.45rem;flex-wrap:wrap}
    .meta{font-size:.78rem;color:#334155;border:1px solid #dbe3ef;background:#f8fafc;border-radius:999px;padding:.2rem .55rem}

    .chips{display:flex;gap:.42rem;flex-wrap:wrap;margin:.95rem 0}
    .chip{text-decoration:none;color:#1e3a8a;border:1px solid #dbe4f4;background:#eff5ff;padding:.24rem .58rem;border-radius:999px;font-size:.8rem;font-weight:600}
    .chip.active{background:#1d4ed8;border-color:#1d4ed8;color:#fff}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(265px,1fr));gap:.9rem}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;overflow:hidden;display:flex;flex-direction:column}
    .sample{padding:.72rem;border-bottom:1px solid var(--line);background:#f8fafc}
    .sample h4{margin:0 0 .35rem;font-size:.83rem;color:#334155}
    .sample table{width:100%;border-collapse:collapse;font-size:.76rem}
    .sample th,.sample td{border:1px solid #e5e7eb;padding:.22rem .3rem;text-align:left;vertical-align:top}
    .sample th{background:#fff;color:#334155}
    .body{padding:.78rem .82rem .88rem;display:flex;flex-direction:column;gap:.38rem;flex:1}
    .cat{align-self:flex-start;font-size:.72rem;color:#1e3a8a;border:1px solid #dbe4f4;background:#eff5ff;padding:.2rem .5rem;border-radius:999px}
    .title{margin:0;font:700 1.2rem "Fraunces",serif;line-height:1.1}
    .tag{margin:0;font-weight:600;color:#1f2937}
    .desc{margin:0;color:var(--muted);line-height:1.45;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden}
    .price{margin-top:auto;font:700 1.36rem "Fraunces",serif}
    .row{display:flex;gap:.4rem}
    .row .btn{flex:1;text-align:center}

    .section-title{margin:1.1rem 0 .45rem;font:700 1.25rem "Fraunces",serif}
    .bundles{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:.8rem}
    .bundle{background:#fff;border:1px solid var(--line);border-radius:14px;padding:.85rem}
    .bundle h3{margin:0 0 .3rem;font:700 1.08rem "Fraunces",serif}
    .bundle p{margin:0 0 .55rem;color:var(--muted)}

    @media (max-width:700px){
      .brand p{display:none}
      .chips{flex-wrap:nowrap;overflow-x:auto;padding-bottom:.2rem;scrollbar-width:thin}
      .chip{white-space:nowrap}
      .grid{grid-template-columns:1fr}
      .row{flex-direction:column}
      .row .btn{width:100%}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <a class="brand" href="/">
        <img src="/static/brand/northstar-mark.svg" alt="Northstar Studio">
        <div><h2>Northstar Studio</h2><p>Practical digital products</p></div>
      </a>
      <a class="btn" href="/">Home</a>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1>Clear digital products with real working examples</h1>
      <p class="sub">Preview each product before you buy. Every product includes editable files, completed examples, and a guided path to first result.</p>
      <div class="hero-row">
        <span class="meta">Preview before purchase</span>
        <span class="meta">Instant download</span>
        <span class="meta">7-day satisfaction guarantee</span>
      </div>
    </section>

    <div class="chips">
      <a class="chip {% if not selected_category %}active{% endif %}" href="/store">All</a>
      {% for c in categories %}
      <a class="chip {% if selected_category == c %}active{% endif %}" href="/store?category={{ c|urlencode }}">{{ c }}</a>
      {% endfor %}
    </div>

    <section class="grid">
      {% for p in products %}
      <article class="card">
        <div class="sample">
          <h4>{{ p.real_world_preview.headline }}</h4>
          <table>
            <thead>
              <tr>
                {% for c in p.real_world_preview.columns[:3] %}<th>{{ c }}</th>{% endfor %}
              </tr>
            </thead>
            <tbody>
              {% if p.real_world_preview.rows and p.real_world_preview.rows|length > 0 %}
              <tr>
                {% for cell in p.real_world_preview.rows[0][:3] %}<td>{{ cell }}</td>{% endfor %}
              </tr>
              {% endif %}
            </tbody>
          </table>
        </div>
        <div class="body">
          <span class="cat">{{ p.category }}</span>
          <h2 class="title">{{ p.title }}</h2>
          <p class="tag">{{ p.tagline }}</p>
          <p class="desc">{{ p.description }}</p>
          <strong class="price">${{ "%.2f"|format(p.price_cents / 100) }}</strong>
          <div class="row">
            <a class="btn primary" href="/products/{{ p.id }}">Preview</a>
            <a class="btn" href="/checkout/{{ p.id }}">Buy</a>
          </div>
        </div>
      </article>
      {% endfor %}
    </section>

    <h3 class="section-title">Bundle offers</h3>
    <section class="bundles">
      {% for b in bundles %}
      <article class="bundle">
        <h3>{{ b["title"] }}</h3>
        <p>{{ b["description"] }}</p>
        <p><strong>${{ "%.2f"|format(b["price_cents"] / 100) }}</strong> bundle price</p>
        <a class="btn primary" href="/bundle/{{ b['key'] }}">View Bundle</a>
      </article>
      {% endfor %}
    </section>
  </main>
</body>
</html>
