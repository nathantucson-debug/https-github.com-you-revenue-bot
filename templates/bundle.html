<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ bundle.title }} | Northstar Studio</title>
  <style>
    :root { --ink:#111827; --muted:#4b5563; --line:#dbe3f0; --bg:#f4f7fc; --brand:#0b5bd3; --ok:#1e7f42; --warn:#a35200; }
    * { box-sizing: border-box; }
    body { margin:0; font-family:"Avenir Next","Segoe UI",sans-serif; color:var(--ink); background:linear-gradient(180deg,#f8fbff 0%,var(--bg) 100%); }
    .wrap { max-width:980px; margin:0 auto; padding:0 1rem; }
    header { border-bottom:1px solid var(--line); background:rgba(255,255,255,.9); position:sticky; top:0; z-index:10; backdrop-filter:blur(8px); }
    .nav { display:flex; justify-content:space-between; align-items:center; padding:1rem 0; }
    .brand { font-weight:800; }
    .btn { display:inline-block; text-decoration:none; border-radius:10px; padding:.62rem .95rem; font-weight:700; border:1px solid var(--line); color:var(--ink); background:#fff; cursor:pointer; }
    .btn.primary { background:var(--brand); color:#fff; border-color:var(--brand); width:100%; }

    main { padding:1.6rem 0 2rem; }
    .layout { display:grid; grid-template-columns:1.2fr .8fr; gap:.95rem; align-items:start; }
    .card { background:#fff; border:1px solid var(--line); border-radius:14px; padding:1rem; }
    .thumb { height:180px; border-radius:12px; margin-bottom:.7rem; width:100%; object-fit:cover; background:#e6edf8; }
    h1 { margin:0 0 .35rem; font-size:2.1rem; line-height:1.12; }
    .desc { margin:0 0 .8rem; color:var(--muted); line-height:1.6; }
    .price { margin:0 0 .5rem; font-size:2rem; font-weight:800; }
    .small { color:var(--muted); font-size:.88rem; line-height:1.45; }
    .status { margin-bottom:.7rem; padding:.6rem .75rem; border-radius:10px; font-size:.92rem; border:1px solid var(--line); background:#f8fbff; }
    .status.ok { color:var(--ok); border-color:#bce4c8; background:#f2fcf5; }
    .status.warn { color:var(--warn); border-color:#f1d2b1; background:#fff8f1; }
    ul { margin:0; padding-left:1.1rem; }
    li { margin:.4rem 0; }
    label { display:block; font-size:.88rem; font-weight:700; margin:.45rem 0 .25rem; color:#31476f; }
    input[type="email"] { width:100%; border:1px solid var(--line); border-radius:10px; padding:.62rem .72rem; font-size:.98rem; }
    .inline { display:flex; align-items:flex-start; gap:.45rem; margin:.55rem 0; font-size:.9rem; color:#334155; }
    @media (max-width:880px) { .layout { grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">Northstar Studio</div>
      <a class="btn" href="/store">Back To Store</a>
    </div>
  </header>

  <main class="wrap">
    {% if checkout_status == "success" %}<div class="status ok">Payment completed successfully.</div>{% endif %}
    {% if checkout_status == "cancel" %}<div class="status warn">Checkout canceled. You can complete purchase anytime.</div>{% endif %}
    {% if lead_status == "captured" %}<div class="status ok">Email saved. We can send your checkout reminder if you leave.</div>{% endif %}
    {% if lead_status == "invalid" %}<div class="status warn">Please enter a valid email address.</div>{% endif %}

    <section class="layout">
      <article class="card">
        <img class="thumb" src="{{ bundle['cover_image'] }}" alt="{{ bundle['title'] }} cover">
        <h1>{{ bundle['title'] }}</h1>
        <p class="desc">{{ bundle['description'] }}</p>
        <p class="price">${{ "%.2f"|format(bundle['price_cents'] / 100) }}</p>
        <p class="small">Includes savings of ${{ "%.2f"|format(bundle['discount_cents'] / 100) }} vs. buying separately.</p>
        <h3>Included Products</h3>
        <ul>
          {% for item in bundle["items"] %}
          <li><strong>{{ item.title }}</strong> - ${{ "%.2f"|format(item.price_cents / 100) }}</li>
          {% endfor %}
        </ul>
      </article>

      <aside class="card">
        <h3>Reserve This Bundle</h3>
        <p class="small">Save your email for reminder follow-up and return checkout.</p>
        <form action="/capture-lead/bundle/{{ bundle['key'] }}" method="POST">
          <label for="email">Email address</label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required>
          <button class="btn" type="submit">Save My Offer</button>
        </form>

        <hr style="margin:1rem 0;border:none;border-top:1px solid var(--line)">

        <h3>Secure Checkout</h3>
        <form action="/checkout/bundle/{{ bundle['key'] }}" method="GET">
          <input type="hidden" name="lead_id" value="{{ lead_id }}">
          <label class="inline"><input type="checkbox" name="add_bump" value="1"> Add {{ order_bump.name }} (+${{ "%.2f"|format(order_bump.price_cents / 100) }})</label>
          <button class="btn primary" type="submit">Buy Bundle</button>
        </form>
      </aside>
    </section>
  </main>
</body>
</html>
